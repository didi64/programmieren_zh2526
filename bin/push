#!/usr/bin/bash 

set -euo pipefail

#if [ "$#" -eq 0 ]; then
#    echo "No arguments supplied, expected list of files to push"
#    exit 1
#fi

repo="programmieren_zh2526"
work="$HOME/work"

token=$(cat ${work}/.token_didi64_musculus)
repo_remote="https://${token}@github.com/didi64/${repo}.git"
repo_local="${work}/.src"


for file in $@; do
    cp -i $file ${repo_local}/notebooks/live/.
done

echo "pushing"
git -C $repo_local add .
git -C $repo_local commit -m "commit from container" || true  # prevent early exit due to set -e if there is nothing to commit

echo ${repo_remote}
git -C $repo_local push ${repo_remote}

echo "done"
